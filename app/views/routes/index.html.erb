<p id="notice"><%= notice %></p>

<h1>Routes</h1>

<table>
  <thead>
  <tr>
    <th>Titles:</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @routes.each do |route| %>
      <tr>
        <td><%= route.name %></td>
        <td><%= link_to 'Показать', route %></td>
        <td><%= link_to 'Изменить', edit_route_path(route) %></td>
        <td><%= link_to 'Удалить', route, method: :delete, data: {confirm: 'Вы уверены?'} %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<table>
  <thead>
  <tr>
    <th>Trains</th>
    <th colspan="2"></th>
  </tr>
  </thead>

  <tbody>
  <% @routes.each do |route| %>
      <% unless route.trains.empty? %>
          <tr>
            <td><%= route.trains.pluck(:number).join(',') %></td>
            <td><%= link_to 'Buy tickets', new_ticket_path(ticket: {train_id: 1, user_id: 1, start_station_id: 1, end_station_id: 3 }) %></td>
          </tr>
      <% else %>
          <tr>
            <td>No trains yet</td>
          </tr>
      <% end %>
  <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Новый маршрут', new_route_path %>
